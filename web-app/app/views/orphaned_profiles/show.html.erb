<% content_for :meta do %>
  <title><%= t(".meta.title", name: @orphaned_profile.name) %> | Classpert</title>
  <meta name='twitter:title'        content='<%= t(".meta.title",       name: @orphaned_profile.name )%> | Classpert' />
  <meta name='twitter:description'  content='<%= t(".meta.description", name: @orphaned_profile.name )%>' />
  <meta name='description'          content='<%= t(".meta.description", name: @orphaned_profile.name )%>' />
  <meta property='og:description'   content='<%= t(".meta.description", name: @orphaned_profile.name )%>' />
<% end %>

<% if @orphaned_profile.avatar_url.present? %>
  <% content_for :meta_og_image do %>
    <meta property='og:image' content='<%= @orphaned_profile.avatar_url %>'>
    <meta name='twitter:image' content='<%= @orphaned_profile.avatar_url %>'>
  <% end %>
<% end %>

<%= content_for :stylesheets do %>
  <%= stylesheet_bundles_with_chunks_tag 'vcard' %>
<% end %>

<%= content_for :javascript do %>
  <%= elements_javascript_include_tag 'vars' %>
  <%= javascript_bundles_with_chunks_tag 'vcard' %>
<% end %>


<%= content_for :sprites do %>
  <%= sprites({
    "country-flags": country_flags.values,
    brand: '*',
    icons: [
      "facebook-circle",
      "linkedin-circle",
      "instagram-circle",
      "twitter-circle",
      "reddit-circle",
      "arrow-down",
      "audio",
      "subtitle",
      "certificate",
      "building",
      "id-badge",
      "velocimeter",
      "level",
      "clock",
      "close",
      "play",
      "video-recorder-unavailable",
      "question",
      "avatar",
      "website",
      "camera",
      "monitor-gear",
      "external-arrow",
      "mag",
      @orphaned_profile.social_profiles.keys
    ].flatten.compact.uniq,
    providers: [
      @orphaned_profile.teaching_at.map(&:downcase).map{|s| s.gsub(/\s/, "-")},
      @orphaned_profile.elearning_profiles.keys
    ].flatten.compact.uniq
  }) %>
<% end %>

<div>
  <div class='el:amx-Bc_su el:amx-P(2.5em|0)'>

    <div class='container'>
      <div class='row'>
        <div class='col-12'>
          <div class='el:m-avatar el:m-avatar--circle el:m-avatar--5x5em'>
            <% if @orphaned_profile.avatar_url %>
              <%= image_tag @orphaned_profile.avatar_url %>
            <% else %>
            <% end %>
          </div><div class='el:amx-D(ib) el:amx-Va(m) el:amx-Ml(0.75em)'>
            <h1 class='el:amx-Fs(1.25em) el:amx-Fw(b)'>
              <%= @orphaned_profile.name %>
              <span style='font-weight:bold'
                class='el:m-tag
                el:m-tag--primary-variant-flat
                el:m-tag--uppercase
                el:m-tag--xxs
                el:amx-Ml(0.5em)
                el:amx-Va(m)'>
                <%= t('.instructor') %>
              </span>
            </h1>
            <div class='el:amx-Fs(0.875em) el:amx-Mt(0.625em) el:amx-Mb(0.125em)'>
              <%= @orphaned_profile.short_bio %>
            </div>
            <div class='el:amx-Mt(0.75em)'>
              <ul class='el:m-list el:m-list--hrz'>
                <% if @orphaned_profile.website.present? %>
                  <li class='el:amx-Mr(0.5em)'>
                    <a href='<%= "#{@orphaned_profile.website}?utm_source=classpert" %>' target='_blank' ref='nofollow'>
                      <%= svg_use('icons', 'website', {class: "el:amx-Fi_fg", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
                <% @orphaned_profile.elearning_profiles.each do |key, val| %>
                  <li class='el:amx-Mr(0.5em)'>
                    <a href='<%= val %>' target='_blank' ref='nofollow noreferrer'>
                      <%= svg_use('providers', key, {class: "el:amx-Fi_#{key}", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
                <% @orphaned_profile.social_profiles.each do |key, val| %>
                  <li class='el:amx-Mr(0.5em)'>
                    <a href='<%= val %>' target='_blank' ref='nofollow noreferrer'>
                      <%= svg_use('icons', key, {class: "el:amx-Fi_#{key}", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class='container'>
    <div>
      <div class='row'>
         <div class='col-12'>
          <div class='el:amx-P(1em|0) el:amx-Bob el:amx-Mb(1em)'>
            <span class='el:amx-Fw(b) el:amx-Fs(0.875em)'><%= t('.are_you', name: @orphaned_profile.name) %></span>
            <%= link_to t(".claim_profile"), claim_orphaned_profile_path(@orphaned_profile.slug), class: 'el:amx-Fs(0.875em) el:cmx-content-link' %>
          </div>
        </div>
      </div>

      <div class='row'>
        <div class='col-12'>

          <% if @orphaned_profile.long_bio.present? %>
            <h2 class='el:amx-Fs(1.25em)'>
              <%= t('.about_me') %>
            </h2>
            <p style='line-height:1.5em'>
              <%= @orphaned_profile.long_bio.html_safe %>
            </p>
          <% end %>

          <% unless @orphaned_profile.courses.empty? %>
            <h2 class='el:amx-Fs(1.25em) el:amx-M(1em|0)'>
              <%= t('.courses', name: @orphaned_profile.name) %>
            </h2>

            <div class='row swiper-container d-md-none' data-swiepable style='width:100%;height:350px;'>
              <div class='swiper-wrapper'>
                <% @orphaned_profile.courses.each do |course| %>
                  <div class='el:amx-Mb(1em) swiper-slide'>
                    <%= render 'vcard', course: course.as_indexed_json %>
                  </div>
                <% end %>
              </div>
            </div>

            <div class='row d-none d-md-flex'>
              <% @orphaned_profile.courses.each do |course| %>
                <div class='col-md-6 col-lg-4 col-xl-3'>
                  <div class='el:amx-Mb(1em)'>
                    <%= render 'vcard', course: course.as_indexed_json %>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>

        </div>
      </div>
    </div>
    <div class='el:amx-Mt(2em) el:amx-Bot'>
      <div class='row'>
        <div class='col-12'>
          <p class='el:amx-Fw(b) el:amx-Fs(0.875em) el:amx-P(1.125em|0)'><%= t('.disclaimer') %></p>
        </div>
      </div>
    </div>
  </div>
</div>
