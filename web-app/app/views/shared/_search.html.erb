<%= content_for :sprites do %>
  <% cache 'sprites' do %>
    <%= URI.open(sprites_url({
      tags: RootTag.all.map(&:id),
      icons: [
        "facebook-circle",
        "linkedin-circle",
        "instagram-circle",
        "twitter-circle",
        "reddit-circle",
        "arrow-down",
        "audio",
        "subtitle",
        "certificate",
        "building",
        "id-badge",
        "velocimeter",
        "level",
        "clock",
        "close",
        "play",
        "featured-badge",
        "video-recorder-unavailable",
        "question",
        "avatar"
      ],
      brand: "*",
      "country-flags": country_flags.values,
      providers: "*"
    })).read.html_safe %>
  <% end %>
<% end %>

<script type='text/javascript'>
  window.env_context = {
    devise: {
      sign_in: "<%= new_user_account_session_path %>",
      sign_up: "<%= new_user_account_registration_path %>",
      signed_in: <%= current_user_account.present? %>
    }
  }
</script>

<%= content_for :stylesheets do %>
  <%= stylesheet_bundles_with_chunks_tag 'search-page' %>
<% end %>

<%= content_for :javascript do %>
  <%= elements_javascript_include_tag 'vars' %>
  <%= javascript_bundles_with_chunks_tag 'search-page' %>
  <%= javascript_bundles_with_chunks_tag 'sharing' %>
<% end %>

<%= render_vue_component "SearchPage", {
  propsData: {
    locale: I18n.locale,
    tag: @tag,
    provider: @provider&.name
  },
  locale: I18n.locale,
  state: {
    data: @courses[:data],
    meta: @courses[:meta]
  }
} %>
