<% content_for :meta do %>
  <title><%= t(".meta.title", name: @user.name) %> | Classpert</title>
  <meta name='twitter:title'        content='<%= t(".meta.title",       name: @user.name )%> | Classpert' />
  <meta name='twitter:description'  content='<%= t(".meta.description", name: @user.name )%>' />
  <meta name='description'          content='<%= t(".meta.description", name: @user.name )%>' />
  <meta property='og:description'   content='<%= t(".meta.description", name: @user.name )%>' />
<% end %>

<% if @user.avatar_url.present? %>
  <% content_for :meta_og_image do %>
    <meta property='og:image' content='<%= @user.avatar_url %>'>
    <meta name='twitter:image' content='<%= @user.avatar_url %>'>
  <% end %>
<% end %>

<%= content_for :stylesheet_bundles do %>
  [ 'vcard' ]
<% end %>

<%= content_for :javascript_bundles do %>
  [ 'vcard' ]
<% end %>

<%= content_for :sprites do %>
  <%= sprites({ brand: "*", i18n: "*", icons: "*", providers: "*", "country-flags": "*", tags: RootTag.all.map(&:id) }) %>
<% end %>

<div>
  <div class='bc-s pV40'>

    <div class='container'>
      <div class='row'>
        <div class='col-12'>
          <div style='position:relative' class='el:m-avatar el:m-avatar--circle el:m-avatar--5x5em'>
            <% if @user.avatar_url %>
              <%= image_tag @user.avatar_url %>
            <% else %>
            <% end %>
            <div style='position:absolute;bottom:0;right:.5em'>
              <%= svg_use('country-flags', @user.country&.downcase, {width: '1.25em', height: '1.25em'}) %>
            </div>
          </div><div class='d-ib va-m mL16'>
            <h1 class='fs20 fw-b'>
              <%= @user.name %>
              <% if @user.instructor %>
                <span style='font-weight:bold'
                  class='el:m-tag
                  el:m-tag--primary-variant-flat
                  el:m-tag--uppercase
                  el:m-tag--xs
                  mL8
                  va-m'>
                  <%= t('.instructor') %>
                </span>
              <% end %>
            </h1>
            <div class='fs14 mT10 mB2'>
              <%= @user.short_bio %>
            </div>
            <div class='mT12'>
              <ul class='el:m-list el:m-list--hrz'>
                <% if @user.website.present? %>
                  <li class='mR8'>
                    <a href='<%= @user.website %>' target='_blank' ref='nofollow'>
                      <%= svg_use('icons', 'website', {class: "fi-fg", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
                <% @user.elearning_profiles.each do |key, val| %>
                  <li class='mR8'>
                    <a href='<%= val %>' target='_blank' ref='nofollow noreferrer'>
                      <%= svg_use('providers', key, {class: "fi-#{key}", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
                <% @user.social_profiles.each do |key, val| %>
                  <li class='mR8'>
                    <a href='<%= val %>' target='_blank' ref='nofollow noreferrer'>
                      <%= svg_use('icons', key, {class: "fi-#{key}", width: '1em', height: '1em'}) %>
                    </a>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class='container'>
    <div class='mT32'>
      <div class='row'>
        <div class='col-12'>

          <% if @user.long_bio.present? %>
            <h2 class='fs20'>
              <%= t('.about_me') %>
            </h2>
            <p style='line-height:1.5em'>
              <%= @user.long_bio.html_safe %>
            </p>
          <% end %>

          <% unless @user.courses.empty? %>
            <h2 class='fs20 mV16'>
              <%= t('.courses', name: @user.name) %>
            </h2>

            <div class='row swiper-container d-md-none' data-swiepable style='width:100%;height:350px;'>
              <div class='swiper-wrapper'>
                <% @user.courses.each do |course| %>
                  <div class='mB16 swiper-slide'>
                    <%= render 'vcard', course: course.as_indexed_json %>
                  </div>
                <% end %>
              </div>
            </div>

            <div class='row d-none d-md-flex'>
              <% @user.courses.each do |course| %>
                <div class='col-md-6 col-lg-4 col-xl-3'>
                  <div class='mB16'>
                    <%= render 'vcard', course: course.as_indexed_json %>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>

        </div>
      </div>
    </div>
  </div>
</div>
