<!DOCTYPE>
<html data-theme='<%= cookies[:theme] %>'>
  <head>

    <!-- Performance tags -->
    <link rel="preconnect" href="https://elements-prd.classpert.com" crossorigin>
    <link rel="dns-prefetch" href="https://elements-prd.classpert.com">

    <!-- Security Meta -->
    <%= csrf_meta_tags %>

    <!-- Device & Ownership Meta -->
    <meta name="viewport" content="width=device-width">
    <meta name="verification" content="898f8f25672b3d4f1acbb0228a862b98">
    <meta name="google-site-verification" content="frJWYLKLhn2TNmNSFXsY_N34EKr2sAfK3TE-M9ogE1o" />
    <meta name="p:domain_verify" content="31b22b390ed384603705691430ca8eb5"/>

    <!-- Render favicons of different formats -->
    <%= render 'favicons' %>

    <!-- Global SEO Meta -->
    <meta name="author" content="Classpert">
    <meta name="copyright" content="Classpert">
    <meta name="designer" content="Classpert">

    <!-- Global OpenGraph Meta -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= current_url_without_query_params %>">
    <meta property="og:locale" content="<%= I18n.locale %>">

    <!-- Global Twitter Meta -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@classpert" />
    <meta name="twitter:creator" content="@classpert" />

    <!-- Custom SEO Meta and Description -->
    <%= yield :meta %>

    <% if content_for?(:meta_canonical) %>
      <%= yield :meta_canonical %>
    <% else %>
      <link rel='canonical' href="<%= current_url_without_query_params %>" />
    <% end %>

    <!-- Custom hreflang Meta  -->
    <% if content_for?(:meta_hreflang) %>
      <%= yield :meta_hreflang %>
    <% else %>
      <% I18n.available_locales.each do |locale| %>
        <link rel="alternate" hreflang="<%= locale %>" href="<%= Domain.new.route_for(locale) + request.path %>">
      <% end %>
        <link rel="alternate" hreflang="x-default" href="<%= Domain.new.route_for(:en) + request.path %>"/>
    <% end %>

    <% if content_for?(:meta_og_image) %>
      <%= yield :meta_og_image %>
    <% else %>
      <meta property='og:image' content="<%= asset_url('/images/classpert-social.png') %>" />
      <meta name="twitter:image" content="<%= asset_url('/images/classpert-social.png') %>" />
    <% end %>

    <!-- schema.org -->
    <script type="application/ld+json">
      {
        "@context" : "http://schema.org",
        "@type" : "Organization",
        "name" : "Classpert",
        "url" : "https://classpert.com",
        "sameAs" : [
          "https://twitter.com/classpert",
          "https://www.facebook.com/classpert",
          "https://pinterest.com/classpert",
          "https://www.instagram.com/classpert",
          "https://www.linkedin.com/company/classpert"
        ]
      }
    </script>


    <!-- Elements css-->
    <% if content_for?(:elements_css) %>
      <%= yield :element_css %>
    <% else %>
      <%= elements_stylesheet_link_tag('icon-font','bundle', skip_pipeline: true) %>
    <% end %>

    <!-- App css -->
    <%= stylesheet_bundles_with_chunks_tag 'vendor'  %>
    <%= stylesheet_bundles_with_chunks_tag 'application'  %>

    <script type='text/javascript'>
      window.I18n = { locale: "<%= I18n.locale %>" }
    </script>

    <% unless ENV.fetch('DISABLE_GTM') { false } %>
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-K5JDRZV');</script>
      <!-- End Google Tag Manager -->
    <% end %>

    <%= yield :stylesheets %>
    <%= yield :jsts %>
  </head>

  <body <%= content_for(:body_html_attributes) ? yield(:body_html_attributes) : '' %> >
    <%#
      #### SVG sprites ####
      display:none won't work here as it breaks gradients. Check
      https://stackoverflow.com/questions/23966452/svg-icon-changes-when-svg-sprite-set-to-displaynone
    %>
    <div style='width:0;height:0'>
      <% if content_for?(:sprites) %>
        <%= yield :sprites %>
      <% else %>
        <%= sprites({icons: "*", brand: '*', i18n: '*', providers: '*', tags: RootTag.all.map(&:id)}) %>
      <% end %>
    </div>

    <% if Rails.env.production? %>
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K5JDRZV"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    <% end %>

    <% if content_for(:banner) %>
      <%= yield :banner %>
    <% end %>

    <% if content_for(:navbar)%>
      <% yield(:navbar) %>
    <% else %>
      <%= render 'application/navbar' %>
    <% end %>

    <% flash.each do |key, value| %>
      <div class='el:amx-Fs(0.875em) el:m-alert el:m-alert--<%= alert_alias(key) %>'>
        <div class='container'>
          <%= value %>
        </div>
      </div>
    <% end %>

    <%= yield :body %>


    <% if content_for(:footer)%>
      <%= yield(:footer) %>
    <% else %>
      <%= render 'footer' %>
    <% end %>

    <%= render 'offcanvas_menu' %>
    <%= javascript_bundles_with_chunks_tag 'vendor',      async: true %>
    <%= javascript_bundles_with_chunks_tag 'application', async: true %>

    <% if content_for?(:elements_js) %>
      <%= yield :elements_js %>
    <% else %>
      <%= elements_javascript_include_tag('bundle', async: false,  skip_pipeline: true) %>
    <% end %>

    <%= yield :javascript  %>
  </body>

</html>
