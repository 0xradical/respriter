<% if params[:tag].present? %>
  <% content_for :meta do %>
    <title><%= t(".#{params[:tag]}.meta.title") %></title>
    <meta name='description' content='<%= t(".#{params[:tag]}.meta.description") %>' />
    <meta property='og:description' content='<%= t(".#{params[:tag]}.meta.description") %>' />
  <% end %>
<% end %>

<script type='text/javascript'>
  window.env_context = { params: { category: <%= raw(Array.wrap(params[:tag]).to_json) %> } }
</script>

<script id='vue-search-app-props' type='x-vue-props'>
  {
    "category": <%= raw(Array.wrap(params[:tag]).to_json) %>,
    "showCategoriesFilter": <%= params[:tag].present? %>,
    "locale": "<%= I18n.locale %>"
  }
</script>

<%= content_for :javascript do %>
  <%= javascript_pack_tag 'search-page' %>
  <%= stylesheet_pack_tag 'search-page' %>
<% end %>

<%= content_for :body_html_attributes do %>
  id='results' class='el:amx-Bc_gray1'
<% end %>

<%
  base_locales   = YAML::load_file(Rails.root.join('config', 'locales', I18n.locale.to_s, "#{I18n.locale}.base.yml"))
  tags           = YAML::load_file(Rails.root.join('config', 'locales', I18n.locale.to_s, "#{I18n.locale}.tags.yml"))
  custom_locales = YAML::load_file(Rails.root.join('config', 'locales', I18n.locale.to_s, "#{I18n.locale}.yml"))
  locales        = base_locales.deep_merge(custom_locales).deep_merge(tags)
%>

<div data-vue-search-app
     data-vue-search-app-translations='<%= locales.to_json %>'
     data-vue-search-app-props='vue-search-app-props'>
</div>
