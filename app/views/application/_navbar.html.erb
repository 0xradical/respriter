<script id='main-menu-tpl' type='x-tmpl-mustache'>
  <%= link_to t('dictionary.sign_in'), new_user_account_session_path,
    class: 'btn btn--blue-border btn--rounded btn--small btn--uppercase' %>
  <%= link_to t('dictionary.sign_up'), new_user_account_registration_path,
    class: 'btn btn--blue-flat btn--rounded btn--small btn--uppercase' %>
  <h4 class='c-off-canvas-menu__section'>Categories</h4>
  <ul class='c-list c-list--unstyled'>
    {{#categories}}
      <a href={{ path }}  style='text-decoration:none;color:initial'>
        <li style='padding:4px 0px'>
          <span class='c-label'>
            <svg class='c-label__icon'>
              <use xlink:href=<%= asset_pack_url('icons-lib.svg', host: '//') %>#{{icon}}></use>
            </svg>
            <span class='c-label__text'>{{text}}</span>
          </span>
        </li>
      </a>
    {{/categories}}
  </ul>
</script>

<script id='locale-dropdown' type='x-vue-template'>
  <locale-dropdown def-locale="<%= I18n.locale  %>"></locale-dropdown>
</script>

<div class='c-navbar' role='header-nav'>

  <%= link_to root_path do %>
    <img src="<%= asset_pack_path('logo_negative.svg') %>" class='c-navbar__slot mx-D(n)@phone mx-D(n)@tablet' width='156px'>
    <img src="<%= asset_pack_path('logo_symbol-negative.svg') %>" class='c-navbar__slot mx-D(n)@>desktop' width='40px'>
  <% end %>

  <div class='c-navbar__slot mx-Ml-1d25@>tablet mx-Ml-0d5@phone'>
    <script id='navbar-search' type='x-vue-template'>
      <search-bar placeholder="<%= t('components.searchbar_placeholder') %>"
      :css-classes='{container: "c-search-slim c-search-slim--negative", form:
      "c-search-slim__form", input: "c-search-slim__input"}'>
        <span slot='icon' class='c-search-slim__icon'></span>
      </search-bar>
    </script>
    <div data-vue-cpt='navbar-search'></div>
  </div>

  <nav style='float:right;line-height:40px;display:inline-block;vertical-align:middle'>

    <% unless user_account_signed_in? %>
      <div class='c-navbar__slot mx-D(n)@phone' style='margin-right(10px)'>
        <div data-vue-cpt='locale-dropdown'></div>
      </div>
    <% end %>

    <a data-off-canvas-menu='#main-menu'
       data-off-canvas-menu-tpl='#main-menu-tpl'
       data-off-canvas-menu-tpl-data='<%= JSON.generate({categories: LabelPrinter.new.labels }) %>'
      class='mx-D(n)@desktop mx-D(n)@tv mx-D(n)@tablet c-navbar__offcanvas-menu-btn'></a>

    <%- if user_account_signed_in? %>
      <div class='c-navbar__slot'>
        <%= link_to user_accounts_dashboard_path("dashboard") do %>
          <% if current_user_account.avatar.present? %>
            <%= image_tag(current_user_account.avatar, height: '37px', style: 'border-radius:50%;border:1px solid #ccc') %>
          <% else %>
            <%= svg_icons_lib('avatar', { width: '37px', height: '37px' } ) %>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <span class='c-navbar__slot mx-D(n)@phone' style='margin-right:4px;margin-left:10px;'>
        <%= link_to t('dictionary.sign_in'), new_user_account_session_path,
          class: 'btn btn--white-border btn--rounded btn--small btn--uppercase' %>
      </span>

      <span class='c-navbar__slot mx-D(n)@phone'>
        <%= link_to t('dictionary.sign_up'), new_user_account_registration_path,
          class: 'btn btn--blue-flat btn--rounded btn--small btn--uppercase' %>
      </span>
    <%- end %>

  </nav>
</div>
