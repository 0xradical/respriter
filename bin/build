#!/usr/bin/env ruby
# frozen_string_literal: true

require 'rubygems'
require 'bundler/setup'
Bundler.require(:default)

require_relative '../lib/respriter'
require 'optparse'

options = {}

OptionParser.new do |opts|
  opts.banner = 'Usage: ./bin/build [options]'

  opts.on('-sv', '--sprite-version', 'Sprite Version') do |v|
    options[:sprite_version] = v
  end

  opts.on('-sv', '--sprite-url', 'Sprite URL (may be more than one, separated by comma)') do |v|
    options[:sprite_url] = [v.split(',').compact].flatten rescue []
  end
end.parse!

print 'Destructuring sprites and building dependencies ...'
Respriter::Builder.new(options[:sprite_version], options[:sprite_url]).run
puts ' done.'
